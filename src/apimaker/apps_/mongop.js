const mongop =  { data(){ return { s2_meti_wen_dda: false, s2_eman_meti_wen: "", s2_sdleif_lla: false, types: { "text": "T", "number": "N", "dict": "O", "list": "L", "boolean": "B", "null": "NL" }, } }, props: ['datafor', 'v','datavar', 'rootdata', 'refname', 'vars'], mounted: function(){ if( typeof(this.v) != "object" ){ this.v = []; }else if( "length" in this.v == false ){ this.v = []; } }, methods: { s2_ooooooohce: function(s2_vvvvvvvvvv){ if( typeof(s2_vvvvvvvvvv)=="object" ){ console.log( JSON.stringify(s2_vvvvvvvvvv,null,4) ); }else{ console.log( s2_vvvvvvvvvv ); } }, s2_od_sdleif_lla: function(){ setTimeout(this.s2_2od_sdleif_lla,100); }, s2_2od_sdleif_lla: function(){ console.log( this.s2_sdleif_lla ); if( this.s2_sdleif_lla == true ){ this.v.splice(0,100); } }, s2_ttttttidda: function(){ this.v.push({ "f":{"t":"T", "v":""}, "t":{"t":"T", "v":""}, "v":{"t":"B", "v":"true"} }); this.s2_eman_meti_wen = ""; this.s2_meti_wen_dda = false; this.s2_sdleif_lla = false; }, s2_edoneteled: function( k, e ){ if( e.ctrlkey ){this.v.splice(k,1);} else if( confirm("are you sure?\nctrl+click to avoid prompt") ){this.v.splice(k,1);} if( this.v.length == 0 ){ this.s2_sdleif_lla = true; } }, s2_kkkcabllac: function( c ){ this.s2_ooooooohce( "s2_kkkcabllac: "+ c ); var x = c.split(/\:/g); if( x[0] == "s2_tceles_dleif" ){ var vf = this.v[ Number(x[1]) ]['f']['v']; var vt = 'T'; var vsub = {}; for(var i=0;i<this.flist.length;i++){ if( this.flist[i]['k'] == vf ){  this.v[ Number(x[1]) ]['t']['v'] = vt;  break; } } }else{ console.log("Callback: " + c + " not defined!"); } this.update_project_structure(); }, update_project_structure: function(){ var v = this.rootdata['data']['project']['v']; var vv = {}; var only_false = true; for(var k=0;k<v.length;k++){ if( v[k]['v']['v'] == "true" ){ only_false = false; } if( v[k]['t']['v'] in this.types ){ vv[ v[k]['f']['v'] ] = {'t':this.types[ v[k]['t']['v'] ]}; }else{ vv[ v[k]['f']['v'] ] = {'t':v[k]['t']['v']}; } if( vv[ v[k]['f']['v'] ]['t'] == "O" && '_' in v[k] ){ vv[ v[k]['f']['v'] ]['_'] = v[k]['_']; } } if( only_false ){ vv = JSON.parse( JSON.stringify( this.v['data']['schema2'] ) ); } this.rootdata['data']['projects'] = vv; }, s2_amehcs_bus_teg: function( vv, vpath ){ try{ var x = vpath.split("->"); var k = x[0]; if( k == "[]" ){ x.splice(0,1); k = x[0]; } if( k in vv ){ if( x.length > 1 ){ x.splice(0,1); if( vv[ k ]['type'] == "dict" ){ return this.s2_amehcs_bus_teg( vv[ k ]['sub'], x.join("->") ); }else if( vv[ k ]['t'] == "L" ){ return this.s2_amehcs_bus_teg( vv[ k ]['sub'], x.join("->") ); }else{ return false; } }else{ return vv[ k ]; } }else{ return false; } }catch(e){  this.s2_ooooooohce("s2_amehcs_bus_teg:" + vpath);this.s2_ooooooohce(vv); return false; } }, s2_srav_egats_ot_erutcurts_yarra_trevnoc: function(v){  if( typeof(v)=='object' && 'length' in v ){ var vv = []; for(var k=0;k<v.length;k++ ){ vv[k] = { "t": this.types[ v[k]['type'] ] }; if( v[k]['t'] == 'O'  ){ if( typeof(v[k]['v']) == "object" && "length" in v[k]['v'] == false ){ vv[k]['_'] = this.s2_srav_egats_ot_erutcurts_yarra_trevnoc( v[k]['v'] ); }else{ vv[k]['_'] = {}; } } } return vv; }else if( typeof(v)=='object' && 'length' in v == false ){ var vv = {}; for(var k in v ){ vv[k] = {"t": this.types[ v[k]['type'] ] }; if( v[k]['type'] == 'dict' ){ if( typeof(v[k]['sub']) == "object" && "length" in v[k]['sub'] == false ){ vv[k]['_'] = this.s2_srav_egats_ot_erutcurts_yarra_trevnoc( v[k]['sub'] ); }else{ vv[k]['_'] = {}; } } if( v[k]['type'] == 'list' ){ if( typeof(v[k]['sub']) == "object" && "length" in v[k]['sub']  ){ vv[k]['_'] = this.s2_srav_egats_ot_erutcurts_yarra_trevnoc( v[k]['sub'] ); }else{ vv[k]['_'] = []; } } } } return vv; }, object_to_input_form: function( vi ){ var vs = this.flist[ vi ]['k'] + "->"; this.s2_ooooooohce( "finding sub for: " + vs ); var vv = {}; for(var i=vi+1;i<this.flist.length;i++){ var vk = this.flist[i]['k']; if( vk.indexOf( vs  ) === 0 ){ this.s2_ooooooohce( "sub fields: " + vk ); vk = vk.replace( vs, ""); var vt = "T"; if( this.flist[i]['t'] == "text" ){ vt = 'T'; }else if( this.flist[i]['t'] == "number" ){ vt = 'N'; }else if( this.flist[i]['t'] == "boolean" ){ vt = 'B'; }else if( this.flist[i]['t'] == "list" ){ vt = 'L'; }else if( this.flist[i]['t'] == "dict" ){ vt = 'O'; vsub = this.object_to_input_form( i ); } vv[ vk ] = vt; if( vt == "O" || vt == "L" ){ vv[ vk ]['_'] = this.object_to_input_form( i ); } } } }, s2_tsil_eraperp: function(){ var vv = []; if( typeof(this.rootdata)=="object" ){ if( 'data' in this.rootdata ){ if( 'schema' in this.rootdata['data'] ){ if( 'fields' in this.rootdata['data']['schema'] ){ vv = this.s2_tsil_sdleif_ot_tcejbo(this.rootdata['data']['schema']['fields']['v']); } } } } this.flist = vv; this.$root.s2_atad_labolg['list2'] = vv; }, s2_tsil_sdleif_ot_tcejbo: function(v, vp =""){ var vv = []; for( var k in v ){ if( 'type' in v[k] ){ vv.push({"k":vp+k+'',"t":v[k]['type']}); if( v[k]['type'] == "dict" ){ var d = this.s2_tsil_sdleif_ot_tcejbo( v[k]['sub'], vp + k + "->" ); for(var j=0;j<d.length;j++){ vv.push(d[j]); } } }} return vv; } }, template: `<div> <div>{</div> <div v-if="typeof(v)!='object'||v==undefined||v==null" style="margin-left:30px;">vobject error</div> <div v-else style="margin-left:10px;"> <div v-for="vd,vkey in v" style="display:flex; margin-bottom:5px;" > <div><input type="button" class="btn btn-outline-danger btn-sm me-2" style="padding:0px 5px;" value="X" v-on:click="s2_edoneteled(vkey,$event)" ></div> <template v-if="'f' in vd&&'v' in vd" > <div style="display:flex;align-self:flex-start;"> <div title="Fields" data-type="dropdown" data-list="list2" v-bind:data-list-values="list2" v-bind:data-for="datafor" v-bind:data-var="datavar+':'+vkey+':f:v'" v-on:click="s2_tsil_eraperp" v-bind:data-context-callback="refname+':s2_tceles_dleif:'+vkey" >{{ vd['f']['v'] }}</div> </div> <div>&nbsp;:&nbsp;&nbsp;</div> <div style="display:flex;align-self:flex-start;"> <div title="Include/Exclude" data-type="dropdown" data-list="list" data-list-values="true,false" v-bind:data-for="datafor" v-bind:data-var="datavar+':'+vkey+':v:v'" >{{ vd['v']['v'] }}</div> </div> </template> <div v-else>Incorrect</div> </div> <div><input class="btn btn-outline-dark btn-sm" style="padding:0px 5px;" type='button' v-on:click="s2_ttttttidda" value='+'></div> </div> <div>}</div> </div>` };